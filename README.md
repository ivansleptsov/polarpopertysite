# Polar Property — SPA с Notion API (через Node.js прокси)

## Как запустить локально
1. Установите Node.js 18+.
2. В корне проекта заполните файл `env`:
   ```env
   NOTION_TOKEN=secret_xxx
   # Один общий ID (fallback):
   DATABASE_ID=
   # Раздельные БД:
   SALE_DATABASE_ID=
   RENT_DATABASE_ID=
   ```
3. Установите зависимости:
   ```bash
   npm install
   ```
4. Запустите сервер:
   ```bash
   npm start
   ```
5. Откройте http://localhost:3000

## Как это работает
- Браузер -> `/api/notion/query` (POST JSON: { scope: 'all' | 'sale' | 'rent' })
- Сервер читает `SALE_DATABASE_ID` и/или `RENT_DATABASE_ID` (или `DATABASE_ID` как запасной вариант), делает запросы к Notion и объединяет результаты.
- UI подгружает `all` при старте. При смене фильтра "Тип сделки" или клике на карточку категории делает запрос с нужным `scope`.

## Структура БД в Notion
В обеих таблицах одинаковые поля:
- Название (Title)
- Тип сделки (Select/Text) — Продажа / Аренда долгосрочная / Аренда краткосрочная
- Категория (Select/Text) — Сданные / Строящиеся
- Район/Город/Локация (Rich text)
- Цена (Number или Text)
- Фото (Files) или Фото URL (Rich text)
- Ссылка (URL)

## Примечания
- Секреты в `env`, в репозиторий не коммитить.
- Для продакшена — деплой сервера и переменные окружения на площадке хостинга.
